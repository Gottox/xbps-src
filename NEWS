v30:
 * The 'build-pkg' target now can be run after 'install-destdir' safely.
   The steps previously run before will be skipped.
 * The default ccache dir behaviour has been changed as follows:
	- If XBPS_HOSTDIR is set and <hostdir>/ccache dir exists, use it.
	- If the above is not true, use <masterdir>/ccache instead.
   This gives us flexibility to make the ccache dir shared between hosts
   or private by the user.

v29:
 * Don't require the xbps static binaries anymore. Rather, a shell wrapper
   is created for xbps-{bin,repo,uhelper} cmd at masterdir/usr/local/sbin.
 * Added support for 'index-{add,clean}' targets from XBPS>=0.16.6.
 * The "build_date" object added onto pkg's metadata has been modified
   and now this reports the current timezone where the pkg was built on:
	* LANG=C date "+%F %R %Z"
 * The options -C, -D, -D and -m can be now relative to cwd.
 * Removed 'repo-checkvers' target; functionality has been implemented in the
   'xbps-src-utils' package and rewritten in C for performance by dave.
 * Added -L flag to disable ASCII colors in msg_* funcs.
 * Removed support for xbps<0.16. 0.16 is required to use xbps-src.
 * Added -D flag to override XBPS_DISTDIR setting from xbps-src.conf.
 * Make the 'build/configure/install-destdir/build-pkg' target work
   once base-chroot has been installed, but the chroot wasn't prepared
   before. Reported by xdave.

v28:
 * Requires xbps>=0.16 (API 20120605) and base-chroot>=0.28_1.
 * Always build bootstrap pkgs in the chroot, iff the chroot was
   already prepared for chroot operations.
 * Added support for "soft replace" for the upcoming xbps-0.16.
 * Replace Add_dependency() with three new variables for templates:

	Add_dependency run -> depends
	Add_dependency build -> makedepends
	Add_dependency full -> fulldepends

   That means that rundeps do not care anymore about srcpkgs/foo/depends
   abi_depends, and api_depends for build deps.

   If no specified version pattern (i.e 'foo>=2.0', any version will be
   accepted: 'foo>=0'). As result, shlib_depends has been removed completely
   and the same functionality can be acomplished with 'depends'.

 * Improve xbps-packages/common/shlibs parsing code with the following
   scheme:

        libfoo.so.2 foo-2.0 <arch>
        libblah.so.1 blah-1.0 <arch>

   This expects two fields: exact SONAME (matching output of objdump -p)
   and the required package name/version, delimited by a blank.

   The third field is optional and will only match in the specified
   architecture.

   By embedding the minimal required version for that SONAME we can get rid
   of all "depends" files in source packages.

 * Make "revision" shared by main pkg and all its subpkgs.

v27:
 * New var for templates: 'create_srcdir'. If set, distfiles for a template
   will be stored in a new subdirectory on XBPS_SRCDISTDIR. This is for
   packages that don't use a versioned distribution tarball, i.e
   chromium/nacl_sdk and adobe-flash-plugin.
 * When resolving build dependencies and if a dependency is not found in
   repository pool, show it. There was a case where it was silently skipped.
 * Make 'xbps-src make-repoidx' target also create index for the
   nonfree/noarch repository. Found by dave.

v26:
 * New var for templates: 'skip_extraction'. This expects a list of file names
   that won't be extracted in the extract phase.
 * When extracting gzip/bzip2 files, extract them at a proper PATH.
 * Fixed a nasty bug which removed all files in pkg's metadata dir and
   broke xbps-triggers. Regression introduced while fixing issue #3.
   Thanks to xdave for the notice!

v25:
 * Fixed issue #4: "When rshlibs are added, stop for base pkg only".
 * Fixed issue #3: "Make sure unwanted files aren't added as pkg metadata"
   by dave. xbps-src now removes those files (if found) before creating
   the package metadata.
 * If required pkg dependency not matched against best pkg version in
   repository pool, build dependency from source.

v24:
 * Fixed almost all regressions since v21.
 * Improved showing repo pkg versions while installing them.

v23:
 * Revert a commit that broke writing run_depends to pkg metadata.

v22:
 * Always cd to wrksrc/build_wrksrc before executing pre/post/do
   functions in packages.
 * Fixed 'remove-autodeps' in chroot case (regression from v21).
 * When checking if required deps are installed, use xbps-bin(8)
   rather than xbps-uhelper, so that it can detect virtual packages
   automagically.
 * Fixed -K to not remove autodeps if set (regression from v21).

v21:
 * Needs base-chroot>=0.27 in masterdir for chroot ops.
 * When initializing chroot in first access, update xbps.conf with
   virtual packages from base-chroot packages.
 * Added new targets 'install-destdir' and 'remove-destdir' to only
   install/remove target package to/from destdir.
 * Added new target 'setcaps' to set required capabilities to the
   helpers. The target must be run as root.
 * The 'clean-autodeps' target has been renamed to 'remove-autodeps'.
 * The 'build-pkg' target now installs the target package to destdir
   and builds the binary package for itself and its dependencies,
   local repositories are updated with generated binary packages.
   This one replaces previous 'install' target.
 * Removed the following targets: show-depends-dirs, show-files,
   install, remove, list, stow, unstow (obsolete, not useful).
 * Removed the following flags: -B and -D (enabled by default) and
   -f, -p, -S and -s (not really useful).
 * XBPS_USE_CAPABILITIES has been removed from configuration file
   and is enabled by default unless uid==0.
 * Rototill build system completely: XBPS_PREFER_BINPKG_DEPS is the
   default for non bootstrap packages and has been removed from
   configuration file. That means that dependencies
   are always installed from binary packages (if available), otherwise
   those are built from source.
 * Improved output for the 'checkvers' target.
 * New target 'repo-checkvers' to compare newest package version
   in repository against the version in srcpkgs.
 * Fixed a regression in install_pkg_from_repos() added in v20.

v20:
 * /etc/mtab is no longer copied to the masterdir; avoids a warning.
 * Improved package dependencies installation from repositories, this
   now handles all returned values from xbps-bin and checks if a
   dependency is already installed before querying the repositories.

v19:
 * Don't strip static libraries with --strip-unneeded, this broke
   a lot of static binaries that used pthreads.
 * Added new [optional] var for templates: 'nostrip_files'. This accepts
   a list of filenames to not strip, i.e nostrip_files="foo.so.0.0 blah".

v18:
 * If writing package's metadata failed, also remove the package destdir
   directory; avoiding the risk of unwanted files on it.
 * Improved stow code: only files that were successfully stowed into
   the masterdir can now be unstowed, therefore avoiding the risk of
   unstowing files not owned by the same package.
 * Disabled automatic revision bump due to unmatched changes in required
   shared libraries (.rshlibs files). The user must find out why
   the shlibs do not match anymore and revbump manually if necessary.
 * Removed empty directories for main pkg and all its subpkgs.

v17:
 * Fixed a bug that made all pkgs contain INSTALL/REMOVE scripts even
   if they aren't necessary.

v16:
 * Try harder when resolving every component in every symlink, emulate
   'readlink -f' which doesn't work if target files aren't available.
 * New [optional] var for templates: 'mutable_files'. This accepts a file
   list to specify some files that could be modified once a binary package
   has been installed; such example could be the kernel package and
   its files "modules.dep and modules.symbols" that could be modified when
   a new external module has been built (from virtualbox for example).
   Please note that this only will have effect with XBPS>=0.12.

v15:
 * Remove -Wl,-zdefs from XBPS_LDFLAGS. Too many packages are broken with
   that enabled, and there's not enough time to fix all them.
 * New [optional] var for templates 'shlib_depends'. This overwrites the
   required pattern for a run dependency set by its `depends' file.
 * Fixed issue 20 in googlecode "xbps-src dependency version check isn't working".
   When building packages with srcpkg deps and installed dependency isn't
   satisfied, do the following:
	- If pkgdep is installed but not satisfied and srcpkg satisfies the
	  dependency, remove pkgdep and reinstall new dependency from srcpkgs.
	- Or if dependency from srcpkgs doesn't satisfy requirement error out.

v14:
 * Strip shared and static libraries with --strip-unneeded.
 * XBPS_LDFLAGS now contains -Wl,-zdefs by default, to abort if there
   are unresolved symbols at build time.
 * Adjust the code to make it work with xbps>=0.12.

v13:
 * Renamed XBPS_DISTRIBUTIONDIR in xbps-src.conf to XBPS_DISTDIR (shorter).
 * Set XBPS_DISTDIR to $HOME/xbps-packages by default.
 * Set XBPS_MASTERDIR to $XBPS_DISTDIR/masterdir by default.
 * If XBPS_MASTERDIR dir doesn't exist, create it.
 * New option XBPS_SRCPKGS_REPOURL to specify the URL to fetch
   the xbps-packages git repository.
 * New target: fetch-srcpkgs. To clone the xbps-packages git repository
   as defined by XBPS_SRCPKGS_REPOURL.
 * -B option can be used with the "bootstrap" target to install a bootstrap
   from binary packages rather than building it from source.

v12:
 * New (optional) var for templates 'build_requires' which expects a minimal
   version of xbps-src required to build a package and its subpkgs.

v11:
 * Uses the new virtualpkg trigger from xbps-triggers-0.32.
 * New xbps.conf for xbps-0.11 for the chroot.
 * Fixed make-repoidx target in no-chroot case.

v10:
 * Fixed paths for chroot and non chroot case in set_defvars().

v9:
 * xbps-src now copies /etc/services to the chroot (masterdir) to make
   https URLs work with xbps-uhelper.
 * The home directory of the user running xbps-src for chroot operations
   has been changed to /tmp.
 * The changes listed above are *only* applied on newly created chroots.

v8:
 * xbps-src failed to detect required shlibs from the same package, when
   them were symlinks and not real files.

v7:
 * xbps-src now provides required XBPS configuration file for use in
   chroot operations, adding local repositories by default.

v6:
 * Fixed the 'show-deps' target to show dependencies that contain the +
   character on its pkgname.

v5:
 * Implemented 'show-deps' target to print build or run time dependencies
   for a source package.
 * It's possible to use xbps-src code from non-default PATH by setting the
   environment variable DESTDIR.
